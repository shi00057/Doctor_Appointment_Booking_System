@model CST8002.Web.Areas.Admin.ViewModels.AdminDashboardIndexVm
@{
    ViewData["Title"] = "Admin Dashboard";
    var userName = Model?.UserName ?? "Admin";
    var today = (Model?.Today ?? DateTime.Today).ToString("yyyy-MM-dd");
    var unread = Convert.ToInt32(ViewData["UnreadCount"] ?? 0);
}

@section Sidebar {
    @await Html.PartialAsync("~/Views/Shared/_SidebarAdmin.cshtml")
}

<div class="container-fluid py-3">
    <div class="d-flex align-items-center justify-content-between mb-3">
        <div>
            <h2 class="mb-0">Hello, @userName</h2>
            <small class="text-muted">Today is @today</small>
        </div>
        <div>
            <a class="btn btn-outline-secondary position-relative"
               asp-area="" asp-controller="Notifications" asp-action="Index">
                Notifications
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                    @unread
                </span>
            </a>
        </div>
    </div>

    <div class="mb-3">
        @await Html.PartialAsync("~/Views/Shared/_NotificationsBar.cshtml")
    </div>

    <div class="row g-3 mb-4">
        <div class="col-12 col-md-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <div>
                        <div class="text-muted">Pending Patients</div>
                        <div class="display-6 fw-semibold">@Model.PendingPatients</div>
                    </div>
                    <a class="btn btn-sm btn-outline-primary"
                       asp-area="Admin" asp-controller="Users" asp-action="PendingPatients">
                        View
                    </a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <div>
                        <div class="text-muted">Doctors</div>
                        <div class="display-6 fw-semibold">@Model.Doctors</div>
                    </div>
                    <a class="btn btn-sm btn-outline-primary"
                       asp-area="Admin" asp-controller="Users" asp-action="Register">
                        Add
                    </a>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <div>
                        <div class="text-muted">Today’s Appointments</div>
                        <div class="display-6 fw-semibold">@Model.TodayAppointments</div>
                    </div>
                    <a class="btn btn-sm btn-outline-primary"
                       asp-area="Admin" asp-controller="Appointments" asp-action="Index">
                        Manage
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-header bg-white">
            <strong>Quick Actions</strong>
        </div>
        <div class="card-body">
            <div class="row g-2">
                <div class="col-12 col-sm-6 col-lg-3">
                    <a class="btn btn-light w-100"
                       asp-area="Admin" asp-controller="Users" asp-action="PendingPatients">
                        Activate Patients
                    </a>
                </div>
                <div class="col-12 col-sm-6 col-lg-3">
                    <a class="btn btn-light w-100"
                       asp-area="Admin" asp-controller="Users" asp-action="Register">
                        Register Doctor
                    </a>
                </div>
                <div class="col-12 col-sm-6 col-lg-3">
                    <a class="btn btn-light w-100"
                       asp-area="Admin" asp-controller="Users" asp-action="EditPatient">
                        Edit Patient Profiles
                    </a>
                </div>
                <div class="col-12 col-sm-6 col-lg-3">
                    <a class="btn btn-light w-100"
                       asp-area="Admin" asp-controller="Users" asp-action="EditDoctor">
                        Edit Doctor Profiles
                    </a>
                </div>
                <div class="col-12 col-sm-6 col-lg-3">
                    <a class="btn btn-light w-100"
                       asp-area="Admin" asp-controller="Schedule" asp-action="Generate">
                        Generate Doctor Slots
                    </a>
                </div>
                <div class="col-12 col-sm-6 col-lg-3">
                    <a class="btn btn-light w-100"
                       asp-area="Admin" asp-controller="Appointments" asp-action="Index">
                        Manage Appointments
                    </a>
                </div>
                <div class="col-12 col-sm-6 col-lg-3">
                    <a class="btn btn-light w-100"
                       asp-area="Admin" asp-controller="Reports" asp-action="Index">
                        Reports
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
