@model IEnumerable<CST8002.Web.ViewModels.NotificationVm>
@if (Model != null && Model.Any())
{
    <div class="card mt-4">
        <div class="card-header">Notifications</div>
        <ul class="list-group list-group-flush">
            @foreach (var n in Model)
            {
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>@n.Message</div>
                    <button class="btn btn-sm btn-outline-primary" data-id="@n.NotificationId" onclick="markRead(this)">Mark as read</button>
                </li>
            }
        </ul>
    </div>
    <script>
        async function markRead(btn){
            const id = btn.getAttribute('data-id');
            await fetch('/ui/notifications/mark-read/'+id,{method:'POST'});
            btn.closest('li').remove();
        }
    </script>
}
